
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Gestion Matériel Sous-Officier</title>
  <link rel="icon" href="https://i.imgur.com/cYoRkpp.png">
  <style>
    body{font-family:Arial,sans-serif;margin:0;padding:20px;background:#f8f9fa;}
    .container{max-width:860px;margin:0 auto;background:white;padding:30px;border-radius:12px;box-shadow:0 4px 15px rgba(0,0,0,0.15);}
    .logo{width:100px;height:100px;border-radius:50%;object-fit:cover;border:3px solid #003087;margin:0 auto 20px;display:block;}
    h1{text-align:center;color:#003087;margin-bottom:8px;}
    .subtitle{text-align:center;color:#555;margin-bottom:30px;}
    label{display:block;margin:18px 0 6px;font-weight:bold;}
    input,select,textarea{width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;box-sizing:border-box;font-size:1rem;}
    button{display:block;margin:50px auto 0;padding:16px 80px;font-size:1.3rem;background:#c8102e;color:white;border:none;border-radius:8px;cursor:pointer;}
    button:hover{background:#a00d24;}
    #loading{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:9999;color:white;font-size:2rem;flex-direction:column;justify-content:center;align-items:center;}
    .spinner{width:80px;height:80px;border:10px solid #fff;border-top:10px solid #c8102e;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:30px;}
    @keyframes spin{to{transform:rotate(360deg);}}
  </style>
</head>
<body>

<div class="container">
  <img src="https://i.imgur.com/cYoRkpp.png" alt="Logo" class="logo">
  <h1>Test Gestion Matériel – Sous-Officier</h1>
  <p class="subtitle">20 questions – Total sur 20 points</p>

  <form id="testForm">
    <label for="prenom">Prénom :</label>
    <input type="text" id="prenom" name="prenom" required>

    <label for="nom">Nom :</label>
    <input type="text" id="nom" name="nom" required>

    <label for="numero">Numéro de candidat / Matricule :</label>
    <input type="text" id="numero" name="numero" required>

    <label for="score">Score total (sur 20) – optionnel :</label>
    <input type="number" id="score" name="score" min="0" max="20" step="0.5" placeholder="À remplir si auto-correction">

    <!-- 20 questions exemples -->
    <label>1. Quels sont les documents obligatoires pour un prêt d’arme individuel ?</label><textarea name="q1" rows="3" required></textarea>
    <label>2. Comment procède-t-on à la vérification quotidienne d’une salle d’armes ?</label><textarea name="q2" rows="3" required></textarea>
    <label>3. Que faire en cas de perte ou de vol d’un effet d’habillement ou d’armement ?</label><textarea name="q3" rows="3" required></textarea>
    <label>4. Quelles sont les règles de stockage des munitions (catégories et conditions) ?</label><textarea name="q4" rows="3" required></textarea>
    <label>5. Comment établit-on un inventaire mensuel d’un parc véhicule ?</label><textarea name="q5" rows="3" required></textarea>
    <label>6. Quel est le rôle du « bordereau de mouvement de matériel » ?</label><input type="text" name="q6" required>
    <label>7. Que vérifie-t-on avant de remettre un véhicule en circulation après maintenance ?</label><textarea name="q7" rows="3" required></textarea>
    <label>8. Quelles sont les principales causes de dégradation prématurée du matériel ?</label><textarea name="q8" rows="3" required></textarea>
    <label>9. Comment gères-tu une rupture de stock critique en opération ?</label><textarea name="q9" rows="3" required></textarea>
    <label>10. Quelle est la procédure en cas de constat d’avarie sur une arme en dotation ?</label><textarea name="q10" rows="3" required></textarea>
    <label>11. Différence entre dotation et prêt de matériel ?</label><textarea name="q11" rows="3" required></textarea>
    <label>12. Que signifie l’état « bon de guerre » pour un véhicule ?</label><input type="text" name="q12" required>
    <label>13. Comment organise-t-on le nettoyage et l’entretien périodique des armes collectives ?</label><textarea name="q13" rows="3" required></textarea>
    <label>14. Quel document matérialise la prise en charge d’un lot de munitions ?</label><input type="text" name="q14" required>
    <label>15. Que faire si un lot de matériel présente une non-conformité à la réception ?</label><textarea name="q15" rows="3" required></textarea>
    <label>16. Rôle du « registre de mouvements » dans une unité ?</label><textarea name="q16" rows="2" required></textarea>
    <label>17. Comment priorises-tu les réparations quand plusieurs véhicules sont HS ?</label><textarea name="q17" rows="3" required></textarea>
    <label>18. Quelles sont les règles de sécurité pour le stockage des produits inflammables ?</label><textarea name="q18" rows="3" required></textarea>
    <label>19. Que signifie « immobilisation technique » d’un véhicule ?</label><input type="text" name="q19" required>
    <label>20. Comment assures-tu la traçabilité d’un effet d’habillement individuel ?</label><textarea name="q20" rows="3" required></textarea>

    <button type="submit">Valider et envoyer</button>
  </form>
</div>

<div id="loading">
  <div class="spinner"></div>
  <div>Envoi en cours… 5 secondes</div>
</div>

<script>
const form = document.getElementById('testForm');
const loading = document.getElementById('loading');

form.addEventListener('submit', async e => {
  e.preventDefault();
  loading.style.display = 'flex';
  form.querySelectorAll('input,select,button,textarea').forEach(el=>el.disabled=true);

  try {
    const formData = new FormData(form);
    formData.append('test_type', 'Test Gestion de Matériel');

    const response = await fetch('https://script.google.com/macros/s/AKfycbxLlL8fJKTTdKcdCFKxmJgK6QbM4bkiC38t1m0nHAA5kAGFTGCbOqcmJ_kQafz3qzkg/exec', {
      method: 'POST',
      body: formData
    });

    await new Promise(r => setTimeout(r, 5000));

    if (response.ok) {
      alert('Réponses envoyées avec succès !');
      form.reset();
    } else {
      alert('Erreur lors de l’envoi.');
    }
  } catch(err) {
    alert('Erreur réseau : ' + err.message);
  } finally {
    loading.style.display = 'none';
    form.querySelectorAll('input,select,button,textarea').forEach(el=>el.disabled=false);
    window.location.reload();
  }
});
</script>
</body>
</html>
